
<?php

/**
 * Description des differentes exploitations
 *
 * @author ibrahima
 */
class exploitations extends dataBase {

    public $id = 0;
    public $name = '';
    public $imageLink = '';
    public $idCommunes = '';
    public $phoneNumber = '';
    public $idUsers = '';

    public function __construct() {
        parent::__construct();
    }
    public function getExploitationsList() {
        $exploitationsList = array();
        $query = 'SELECT `id`, `name`, `phoneNumber`, `imageLink`, `idUsers` FROM `piupiu_exploitations`';
        $exploitationsResult = $this->db->query($query);
        $exploitationsList = $exploitationsResult->fetchAll(PDO::FETCH_OBJ);
        return $exploitationsList;
    }
     public function getExploitationsById() {
        $query = 'SELECT `id`, `name`, `phoneNumber`, `imageLink`, `idUsers` FROM `piupiu_exploitations` WHERE `id` = :id';
        $exploitationsResult = $this->db->prepare($query);
        $exploitationsResult->bindValue(':id', $this->id, PDO::PARAM_INT);
        $exploitationsResult->execute();
        $exploitationsList = $exploitationsResult->fetch(PDO::FETCH_OBJ);
        return $exploitationsList;
    }
     public function getExploitationsByIdUsers() {
        $query = 'SELECT `id`, `name` FROM `piupiu_exploitations` WHERE `idUsers` = :idUsers';
        $userIdExploitation = $this->db->prepare($query);
        $userIdExploitation->bindValue(':idUsers', $this->idUsers, PDO::PARAM_INT);
        $userIdExploitation->execute();
        $userIdExploitationList = $userIdExploitation->fetchAll(PDO::FETCH_OBJ);
        return $userIdExploitationList;
    }


    public function __destruct() {
        
    }

}
